version: '3.8'

services:
  waf-detector:
    build: .
    image: veerxx/waf-detector:latest
    container_name: waf-detector
    volumes:
      - ./results:/app/results
      - ./config:/app/config
    environment:
      - PYTHONUNBUFFERED=1
    command: ["--help"]
    
  waf-scanner:
    build: .
    image: veerxx/waf-detector:latest
    container_name: waf-scanner
    volumes:
      - ./targets.txt:/app/targets.txt
      - ./scan_results:/app/results
    command: ["-v", "-o", "/app/results/scan.json", "https://example.com"]
    
  batch-scanner:
    build: .
    image: veerxx/waf-detector:latest
    container_name: batch-scanner
    volumes:
      - ./targets:/app/targets
      - ./batch_results:/app/results
    command: ["-v", "-a", "-o", "/app/results/batch_scan.json"]
    stdin_open: true
    tty: true
